sntRover.controller("RVStaffsettingsModalController",["$scope","ngDialog","RVSettingsSrv",function(e,n,r){BaseCtrl.call(this,e),e.newPassword="",e.confirmPassword="",e.errorMessage="",e.fetchData=function(){var n=function(n){e.userInfo=n,e.$emit("hideLoader")},t=function(n){e.$emit("hideLoader")};e.invokeApi(r.fetchUserInfo,{},n,t)},e.fetchData(),e.cancelClicked=function(){n.close()},e.passwordsMatch=function(){return e.newPassword===e.confirmPassword&&0!==e.newPassword.length},e.updateSettings=function(){var n=function(n){e.cancelClicked(),e.$emit("hideLoader")},t=function(n){e.errorMessage=n,e.$emit("hideLoader")};e.invokeApi(r.updateUserInfo,{new_password:e.newPassword},n,t)}}]),angular.module("sntRover").service("RVSettingsSrv",["$q","RVBaseWebSrv",function(e,n){this.fetchUserInfo=function(){var r=e.defer(),t="admin/user/get_user_name_and_email.json";return n.getJSON(t).then(function(e){r.resolve(e)},function(e){r.reject(e)}),r.promise},this.updateUserInfo=function(r){var t=e.defer(),o="admin/user/change_password";return n.postJSON(o,r).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]);